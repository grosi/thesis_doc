%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Titel:   Konzept
% Autor:   zursr1, gross10
% Datum:   28.05.2014
% Version: 0.0.1
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%:::Change-Log:::
% Versionierung erfolgt auf folgende Gegebenheiten: -1. Release Versionen
%                                                   -2. Neue Kapitel
%                                                   -3. Fehlerkorrekturen
%
% 0.0.0       Erstellung der Datei
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Konzept}\label{ch:konzept}

%
% Blockdiagramm
\section{Blockdiagramm}
Das Konzept kann teilweise aus dem beschriebenen Beispielprojekt in \todo{Referenz hinzufügen} extrahiert werden. Dort wurde wie schon gesagt eine ähnliche Aufgabenstellung gelöst. Durch die geringe Einarbeitungszeit konnten wir einige Ideen übernehmen. Wir haben uns entschieden die Methode mit der doppelten Integration der Beschleunigung der Bewegung umzusetzen, wie in der Literaturstudie in \cite{lit:doubleint} gesehen.\par
%
Die Beschleunigung der Bewegung wird von einem auf dem Knie montierten drei Achsen Beschleunigungssensor aufgezeichnet. Die aufgezeichneten Beschleunigungsdaten enthalten zum einen die Erdbeschleunigung sowie zum andern die Bewegungsbeschleunigung. Uns  interessieren jedoch nur die Beschleunigung der Bewegung. Somit müssen wir zuerst die Erdbeschleunigung detektiert und diese von der Bewegungsbeschleunigung trennen. Anschliessend wird die Orientierung des Sensors, welcher in beliebiger weise im Raum steht, kompensiert. Hierbei ist als Bezugssystem die Erde gewählt (z-Achse entspricht der Erdbeschleunigung). Die kompensierten Beschleunigungsdaten haben wir nun noch zweimal zu integrieren, um auf die Bewegung schliessen zu können. Das gesamte Blockdiagramm ist in Abbildung \vref{img:blockdiagramm} ersichtlich. Auf die einzelnen Blöcke soll in den folgenden Unterkapiteln näher eingegangen werden.
%
% Blockdiagramm
\image{content/3_konzept/image/Blockdiagramm_Konzept}{scale=0.9,angle=90}{htbp}[Blockdiagramm Konzept][img:blockdiagramm]
\todo{Bildposition, Grösse besser}
%
% Filterung
\newpage
\subsection{Tiefpass-Filterung}
Als erste Aufgabe müssen wir die Beschleunigungsdaten auftrennen in die Erdbeschleunigung und die Beschleunigung der Bewegung. Beide Komponenten können wir weiterverwenden. Die Erdbeschleunigung ermöglicht uns das Schätzen der Orientierung (Abschnitt \vref{subsec:orientierungsschätzung}), die Beschleunigung der Bewegung wird zum Schätzen der Position mittels doppelter Integration verwendet.\par
%
Die Erdbeschnleunigung ist in jedem Falle eine konstante Beschleunigung. Aus diesem Grund können wir diese Beschleunigung wie eine DC-Komponente betrachten. Mit einer Tiefpass-Filterung können wir somit die Erdbeschleunigung von der Beschleunigung der Bewegung trennen. Als Tiefpassfilter wurde ein \todo{Überprüfen ob Filterwahl gut} \gls{ac:fir}-Filter gewählt. 
%
% Filterentwurf
\subsubsection*{Filterentwurf}
Das verwendete \gls{ac:fir}-Filter hat, wie der Name schon aussagt eine endliche Impulsantwort und ist somit gezwungen stabil. Der Phasengang dieser Filter ist linear. Die Gruppenlaufzeit entspricht der Zeit, durch die das Eingangssignal eines \gls{ac:lti}-Systems verzögert wird. Diese ist durch die lineare Phase bei einem \gls{ac:fir}-Filter konstant. Das Eingangssignal ist also am Ausgang nur verzögert und nicht verzerrt.\cite{lit:vongruenigen}\par
%
Zum Entwurf des Filters müssen zuerst einige Spezifikationen des Filters festgelegt werden. Diese sind in der Abbildung \vref{img:spezfilter} ersichtlich und sind:
%
\begin{itemize}
\item f\low{pass}: Durchlassfrequenz
\item f\low{stop}: Sperrfrequenz
\item A\low{pass}: Rippel im Durchlassbereich
\item A\low{stop}: Dämpfung im Sperrbereich 
\end{itemize}
%
% Filterentwurf
\image{content/3_konzept/image/filterentwurf}{scale=0.6}{htbp}[Spezifikationen eines Tiefpassfilters \cite{img:filterentwurf}][img:spezfilter] 
%
\subsubsection*{Fenstermethode}
Zum Entwurf des Filters wurde die einfachste sogenannte Fenstermethode gewählt. Bei dieser Methode geht man vom idealen Frequenzgang des Filters aus. Dieser Frequenzgang hat im Falle eines \gls{ac:tp}-Filters bis zur Durchlassfrequenz f\low{pass} den Wert 1, bei grösseren Frequenzen den Wert 0. Aus dem Frequenzgang H\low{ideal}($e^{j\Omega}$) können wir mit der inversen Fourier-Analyse auf die Impulsantwort h\low{ideal}(n) des Filters schliessen wie gemäss Gleichung \vref{eq:invfourier} in \cite{lit:vongruenigen} beschrieben.
%
\formula{
h_{ideal}(n) = \frac{1}{2\pi}\int_{-\pi}^{\pi} H_{ideal}(e^{j\Omega})*e^{j\Omega n}d\Omega\\
\Omega = k\frac{2\pi}{N}
}{
h_{ideal} & ideale Impulsantwort\\
H_{ideal} & idealer Frequenzgang\\
N & Anzahl Samples 
}[eq:invfourier] \todo{N richtig benamsen/überprüfen}
%
Diese ideale Impulsantwort ist durch den Sprung an der Durchlassfrequenz unendlich lang und somit nicht realisierbar. Eine einfache Lösung ist, die Impulsantwort mit einem Fenster zu begrenzen. Somit erhält man die Impulsantwort des \gls{ac:fir}-Filters wie in Gleichung \vref{eq:impfir} durch die Multiplikation des Fensters mit der idealer Impulsantwort des Filters.
%
\formula{
h[n]=h_{ideal}[n]w[n]
}{
h & approximierte Impulsantwort\\
h_{ideal} & ideale Impulsantwort\\
w & Fensterfunktion
}[eq:impfir]
%
% Schätzung der Orientierung
\subsection{Schätzung der Orientierung}\label{subsec:orientierungsschätzung}
Um die Bewegung des Sensors im Bezugssystem des Betrachters darstellen zu können, muss die Orientierung des Sensors bekannt sein. Als Bezugssystem verwenden wir die Erde, bei welcher die z-Achse des Koordinatensystems parallel zur Erdbeschleunigung liegt. Mit dem Gravitätsvektor a\low{g} und der gemessenen Erdbeschleunigung des Sensors können wir mit einfachen, grundlegenden Vektoroperationen auf den Drehwinkel sowie auf die Richtung der Rotationsachse zwischen den beiden Betrachtungssystemen schliessen.
%
\subsubsection*{Drehwinkel}
Der Drehwinkel entspricht gerade dem Zwischenwinkel der Beiden Vektoren a\low{g} sowie den Beschleunigungsdaten a\low{sens}. Der Zwischenwinkel zweier Vektoren können wir über das Skalarprodukt berechnen. Nach Papula \cite{lit:papula} ist dieses wie in Gleichung \vref{eq:dotp} möglich.
%
\formula{
\overrightarrow{a\low{g}}*\overrightarrow{a\low{sens}} = \mid \overrightarrow{a\low{g}}\mid *\mid \overrightarrow{a\low{sens}}\mid *\cos(\phi)\\
\\
\phi=\arccos\left(\frac{\overrightarrow{a\low{g}}*\overrightarrow{a\low{sens}}}{ \mid \overrightarrow{a\low{g}}\mid *\mid \overrightarrow{a\low{sens}}\mid}\right)
}{
\phi & Zwischenwinkel der beiden Vektoren\\
\overrightarrow{a\low{g}} & Gravitätsvektor\\
\overrightarrow{a\low{sens}} & gemessene Erdbeschleunigung
}[eq:dotp]
%
\subsubsection*{Rotationsachse}
Die Rotationsachse benötigen wir, um eine Bezugsachse für die Drehung des Koordinatensystems des Sensors in das Koordinatensystems des Betrachters vorzunehmen. Die Rotationsachse muss somit senkrecht auf dem von den beiden bekannten Vektoren, dem Gravitätsvektor a\low{g} und dem vom Beschleunigungssensor aufgenommenem Vektor, stehen. Dazu verwenden wir das Vektorprodukt, auch Kreuzprodukt genannt. Das Vektorprodukt zweier Vektoren berechnet den Vektor, welcher senkrecht auf die von den beiden Vektoren aufgespannten Ebene steht. Die Länge dieses Vektors (die Norm oder der Betrag) entspricht der von den beiden Vektoren aufgespannten Fläche. Wir normieren den erhaltenen Vektor zusätzlich, damit dieser stets Länge Eins hat. Die Rotationsachse $\overrightarrow{n}$	wird somit wie in Gleichung \vref{eq:cross} berechnet.
%
\formula{
\overrightarrow{n} = \frac{\overrightarrow{a\low{g}} \times\overrightarrow{a\low{sens}}}{ \mid \overrightarrow{a\low{g}} \times \overrightarrow{a\low{sens}}\mid}
}{
\overrightarrow{n} & Richtung der Rotationsachse\\
\overrightarrow{a\low{g}} & Gravitätsvektor\\
\overrightarrow{a\low{sens}} & gemessene Erdbeschleunigung
}[eq:cross]
%
% Verzögerung
\subsection{Verzögerung, Berechnung der Bewegungsbeschleunigung}
Um die Beschleunigung der Bewegung zu erhalten, möchten wir die berechnete Erdbeschleunigung am Sensor von der gemessenen Beschleunigung am Sensor subtrahieren. Die gemessene Beschleunigung am Sensor beinhaltet bekanntlich die Erdbeschleunigung sowie die gefragte Beschleunigung der Bewegung.\par
%
Jede Filterung hat eine Verzögerung des Signals zur Folge. Diese Verzögerung ist, nach Notizen in der Vorlesung Digitale Signalverarbeitung (BTE5034 DIGSV) bei Herrn Rolf Vetter verhält sich wie in Gleichung \vref{eq:delay} aufgezeigt.
%
\formula{
n_{d} = \frac{n_{b}}{2}
}{
n_{d} & Verzögerung in Samples\\
n_{b} & Anzahl Filterkoeffizienten
}[eq:delay]
%
Die durch die Filterung berechnete Erdbeschleunigung können wir nicht direkt von der gemessenen Beschleunigung am Sensor abziehen. Die gemessene Beschleunigung am Sensor müssen wir zuerst verzögern. Dies erreichen wir mit einem einfachen Verzögerungselement. Die Funktion eines solchen Elementes ist in Abbildung \vref{img:delay} dargestellt.\par
%
% Verzögerungselement
\image{content/3_konzept/image/Verzoegerungselement}{scale=1}{htbp}[Verzögerungselement][img:delay]
%
Nachdem das gemessene Signal zusätzlich verzögert wurde, kann das gefilterte Signal nun vom verzögerten Signal abgezogen werden um die Komponente der Erdbeschleunigung abzuziehen.
%
% Rotation
\subsection{Rotation}
Die Rotation benötigen wir, um das Koordinatensystem des Sensors in das Koordinatensystem des Betrachters zu transformieren. Dabei benötigen wir die zuvor berechnete Rotationsachse $\overrightarrow{n}$, um welche wir das System drehen wollen sowie den Drehwinkel $\phi$ zwischen den beiden Vektoren. Die Rotationsmatrix können wir mit diesen Parametern nach der im Kapitel \vref{ch:grundlagen} im Abschnitt \vref{sub:rot} beschriebenen Vorgehen aufstellen.\par
% 
Mit der Rotationsmatrix und der berechneten Beschleunigung der Bewegung kann die Transformation ins Koordinatensystem des Betrachters mit einer einfachen Multiplikation erreicht werden. Der Output ist dabei die Beschleunigung der Bewegung im definierten Betrachtungssystem. Die beliebige Orientierung des Beschleunigungssensors am Knie ist somit kompensiert.
%

%
% Integration
\subsection{Integration}
Um von der Beschleunigung auf die Position zu schliessen, können wir die Beschleunigung bekannterweise  zweimal nach der Zeit integrieren. Integrieren wir die Beschleunigung einmal, so erhalten wir die Geschwindigkeit.
%
\formula{
v(t) = \int a(t)dt + v_0 
}{
v & Geschwindigkeit [$m/s$]\\
v_{0} & Anfangsgeschwindigkeit [$m/s$]\\
a & Beschleunigung [$m/s^2$]
}[eq:geschw]
%
Integrieren wir diese Geschwindigkeit erneut, so erhalten wir den zurückgelegten Weg über die betrachtete Zeitdauer.
\formula{
s(t) = \int v(t)dt + s_0 
}{
s & zurückgelegter Weg [m]\\
s_{0} & Anfangsposition [m]\\
v & Geschwindigkeit [$m/s$]
}[eq:weg]
% 
Die Integration erfolgt wie bereits im Kapitel \vref{ch:grundlagen} im Abschnitt \vref{sec:numint} beschrieben nummerisch mittels der Trapezmethode.
%
%Software
\section{Software}\label{s:konzept:sw}
	%
	\subsection{Rohdaten aufzeichnen}\label{ss:rohdaten_aufzeichnen}
		Für die Verifikation des Konzept müssen Rohdaten des Beschleunigungssensors aufgenommen und in \gls{g:matlab} eingespeist werden. Dazu muss eine \gls{g:labview}-\acrshort{ac:vi} erstellt werden, die Daten aufnehmen und in einem \gls{g:matlab}-kompatiblen Format speichern kann.\par 
		%
		Als Basis für die \acrshort{ac:vi} dient das Standardprojekt \textsf{myRIO Project}\footnote{Das Projekt kann im Startdialog von \gls{g:labview} 2013 angewählt werden} von \gls{g:labview}, das folgende Möglichkeiten mitbringt:
		%
		\begin{itemize}
			\item Anbindung, inkl. Initialisierung den \gls{g:myrio}s
			\item Darstellung von aktuellen Beschleunigungsdaten in Diagramm
			\item Start und Stopp der Messung
		\end{itemize}
		%
		Damit die dargestellten Daten aufgezeichnet werden können, muss das bestehende Projekt mit den Komponenten Datei anlegen, Daten buffern und Daten speichern ergänzt werden. Für diesen Zweck werden die drei Zustände der bestehenden Sequenz angepasst.
		%
		\subsubsection*{Initialisierungs-Zustand}
			In der Initialisierung muss eine Datei für das spätere Speichern der Rohdaten erstellt werden. Dazu wird der in Abbildung \vref{img:init_file} ersichtliche Ablauf verwendet. Der Dateiname kann mit Hilfe eines Eingabefeldes (siehe Abbildung \vref{img:init_file_indicator}) individuell angepasst werden, muss aber die Endung \texttt{*.xlsx} aufweisen. Der Pfad der angelegten Datei bezieht sich auf das Home-Directory des \texttt{lvuser}, einem lokalen Benutzer des \gls{ac:ni} Real Time Linux. Der endgültige Speicherpfad wird anschliessend im letzten Zustand (Schliessen-Zustand) ausgegeben.
			%
			\begin{figure}[htbp] %htbp
				\centering
				\begin{subfigure}[b]{0.49\textwidth}
					\centering
					\includegraphics[scale=1]{content/3_konzept/image/init_file}  
					\caption{Blockdiagramm}
					\label{img:init_file}          
				\end{subfigure}
				\begin{subfigure}[b]{0.49\textwidth}
					\centering
					\includegraphics[scale=1]{content/3_konzept/image/init_file_indicator}  
					\caption{Frontpanel} 
					\label{img:init_file_indicator}         
				\end{subfigure}
				\caption{Datei erstellen}
				\label{img:datei_erstellen}
	    	\end{figure}\par
	    	%
	    	Für das einfachere Einstellen der Sampling-Rate wird die Initialisierung noch durch eine solche Möglichkeit ergänzt. Für eine einfachere Interpretation wird zudem noch eine Umrechnung in Herz vorgenommen und angezeigt. Der Ablauf und das UI ist in der Abbildung \vref{img:periode} ersichtlich.
	    	%
			\begin{figure}[htbp] %htbp
				\centering
				\begin{subfigure}[b]{0.49\textwidth}
					\centering
					\includegraphics[scale=1]{content/3_konzept/image/init_periode}  
					\caption{Blockdiagramm}
					\label{img:init_periode}          
				\end{subfigure}
				\begin{subfigure}[b]{0.49\textwidth}
					\centering
					\includegraphics[scale=1]{content/3_konzept/image/init_periode_indicator}  
					\caption{Frontpanel} 
					\label{img:init_periode_indicator}         
				\end{subfigure}
				\caption{Sampling-Rate einstellen}
				\label{img:periode}
	    	\end{figure}
	    	%	
		%
		\subsubsection*{Datenaufzeichnen und Verarbeiten-Zustand}
			Der Hauptzustand dieses \gls{ac:vi}s besteht aus zwei Teilen. Der erste Teil beinhaltet einen Endlosschlaufe\footnote{genauer ein Time Loop, der eine genaue zyklische Ausführung gewährleistet}, die zyklisch Beschleunigungsdaten und Timestamps einliest und buffert. Zusätzlich werden die aktuellen Daten in Diagramm auf dem Frontpanel ausgegeben. Wird die Endlosschleife durch eine Fehler oder durch Betätigung der Stopp-Schaltfläche beendet, so werden im zweiten Teil die gebufferten Daten mit Labels versehen, zu einer N x 4 Matrix zusammen gefasst und in eine Excel-Tabelle geschrieben. Dargestellt ist dieser Ablauf in der Abbildung \vref{img:process}. Die für die Bedienung erforderliche Komponenten können der Abbildung \vref{img:process_indicator} entnommen werden.
			%
			\begin{figure}[htbp] %htbp
				\centering
				\begin{subfigure}[b]{\textwidth}
					\centering
					\includegraphics[scale=0.4]{content/3_konzept/image/process}  
					\caption{Blockdiagramm}
					\label{img:process}          
				\end{subfigure}
				\begin{subfigure}[b]{\textwidth}
					\centering
					\includegraphics[scale=0.7]{content/3_konzept/image/process_indicator}  
					\caption{Frontpanel} 
					\label{img:process_indicator}         
				\end{subfigure}
				\caption{Daten einlesen und speichern}
				\label{img:daten_einlesen}
	    	\end{figure}
	    	%	
		%
		\subsubsection*{Schliessen-Zustand}
			Abgeschlossen wird das \gls{ac:vi} durch den Schliessen-Zustand. Dabei wird das \gls{g:myrio} auf den Ursprung zurückgesetzt und der Speicherpfad der Daten ausgeben. Für diesen Zweck wird eine vorgefertigte \gls{ac:vi} von \gls{ac:ni} verwendet, die das Reseten des \gls{g:myrio}s durchführt. Die Ausgabe des Pfades erfolgt bereits im vorderen Zustand, wird jedoch erst hier visualisiert. Für das Blockdiagramm und das UI sei auf die Abbildung \vref{img:speicherpfad} verwiesen.
			%
			\begin{figure}[htbp] %htbp
				\centering
				\begin{subfigure}[b]{0.49\textwidth}
					\centering
					\includegraphics[scale=1]{content/3_konzept/image/close}  
					\caption{Blockdiagramm}
					\label{img:process}          
				\end{subfigure}
				\begin{subfigure}[b]{0.49\textwidth}
					\centering
					\includegraphics[scale=1]{content/3_konzept/image/close_indicator}  
					\caption{Frontpanel} 
					\label{img:close_indicator}         
				\end{subfigure}
				\caption{Speicherpfad angeben und \gls{g:myrio} reseten}
				\label{img:speicherpfad}
	    	\end{figure}\par
	    	%	
	%
	\subsection{myRIO Posture Estimation}
%
%
%Verifikation Translation
\section{Verifikation Translation}\label{s:verifikation_translation}
	%
	%
	\subsection{Grund/Zweck der Messung}
		Die Verifikation der Translation stellt das erste von drei Experimental-Protokollen\footnote{die übrigen Protokolle sind in den Abschnitten \vref{s:verifikation_rotation} und \vref{s:verifikation_transaltion_rotation} zu finden} dar, die folgend für die Validierung des Konzepts als Ausgangslagen dienen sollen.  Ziel der Messung ist es den Algorithmus hinsichtlich einer linearen Translation zu überprüfen. Dabei gilt es relevante Fakten wie Genauigkeit und Dynamik zu extrahieren und für die Validierung festzuhalten. Bei auftretenden Diskrepanzen muss das Konzept überarbeitet und dieses Protokoll wiederholt werden.
	%
	%
	\subsection{Material/Testumgebung}\label{ss:material_translation}
		Die Messung muss reproduzierbar sein. Deshalb muss eine Testumgebung gewährleistet sein, die für eine Simulation einer geradlinigen Translation geeignet ist. Diese Voraussetzung erfüllt ein Kreuztisch einer Standbohr- / Fräsmaschine. Damit können vorgegebene Pfade präzise in der X/Y-Ebene gefahren werden.\par 
		%
		Für die Messung wird der Kreuztische der XXX aus der mechanischen Abteilung verwendet. Weiter kommt als zentrale Komponente das \gls{g:myrio} zum Einsatz. Ein vollständige Auflistung aller verwendeten Mittel ist der Tabelle \vref{tab:messmittel_translation} zu entnehmen. Der reale Aufbau der Umgebung entspricht der Abbildung XXX.
		%
		\input{content/3_konzept/table/messmittel}
		%
		\subsubsection*{Translationsrichtung}
			Durch die Tatsache das der Kreuztisch M\low{1} über keine \acrshort{ac:cnc}-Steuerung verfügt können keine konstante statischen Bewegungen in der X/Y-Ebene gefahren werden. Es wird deshalb auf ein Freiheitsgrad verzichtet und nur eine Translation in X-Richtung vorgesehen. 
		%
		\subsubsection*{Translationsgeschwindigkeit}
			Die Translationsgeschwindigkeit ist abhängig vom Bediener des Kreuztisches. Es kann deshalb keine abschliessende Aussage über die Geschwindigkeit gemacht werden. Die subjektiv wahrgenommene Bewegung wird lediglich in die drei Stufen langsam, mittel und schnell eingestuft.
	%
	%
	\subsection{Methoden}
		%
		\subsubsection*{Messgruppen}
			Es werden zwei Messgruppen definiert. Die eine dient als Testgruppe und die andere als Kontrollgruppe. 
			%
			\begin{itemize}
				%
				\item \textbf{Testgruppe} Die Testgruppe repräsentiert das \gls{g:myrio}, das zur Aufzeichnung der Beschleunigungsdaten benötigt wird. Dabei werden die Daten nur gespeichert und nicht verarbeitet\footnote{Für detailliertere Informationen zur Aufzeichnung sei auf den Abschnitt \vref{ss:rohdaten_aufzeichnen} verwiesen}. Die Signalverarbeitung erfolgt zu einem späteren Zeitpunkt auf einem Computer mit Hilfe von \gls{g:matlab}.
				%
				\item \textbf{Kontrollgruppe} Die zweite Gruppe stellt die direkte Messung mit der Kreuztischskala dar. Sie ist gleichzeitig die Kontrollgruppe, die schlussendlich bei der Interpretation als Ausgangslage gilt.
			\end{itemize}
			%
			Die Messmethodik stellt bei den beschriebenen Gruppen die unabhängige Variabel dar.
		%
		\subsubsection*{Testbeschreibungen}
			Es werden mehrere unterschiedliche Messungen, die sich hinsichtlich Geschwindigkeit und Positionierung unterscheiden, durchgeführt. Dazu wird das \gls{g:myrio} unterschiedlich positioniert. Um die Anzahl Messungen in eine überschaubaren Rahmen zu halten, wird der Test auf 3 Positionen beschränkt. 
			%
			\begin{itemize}
				\item \textbf{X-Achse Position} Das \gls{g:myrio} wird flach auf dem Kreuztisch angebracht. Dabei zeigt die X-Achse des Beschleunigungssensors nach unten, sprich gleichgerichtet wie der Gravitationsvektor. Relative Beschleunigungen erfolgen in der X/Y-Ebene in X-Richtung des Kreuztisches. Eine schematische Darstellung der Befestigung kann der Abbildung \vref{img:x_achse} entnommen werden.
				\image{content/3_konzept/image/testaufbau_translation_position_x}{scale=0.8}{htbp}[X-Achsen Position][img:x_achse]
				%
				\item \textbf{Y-Achse Position} Bei der zweiten Position wird das \gls{g:myrio} so angebracht, das die Y-Achse des Beschleunigungssensors parallel zum Gravitationsvektor steht. Gemessene Beschleunigungen wirken sich somit nur auf die X- und Z-Achse aus. Die Abbildung \vref{img:y_achse} verdeutlicht diesen Aufbau.
				\image{content/3_konzept/image/testaufbau_translation_position_y}{scale=0.8}{htbp}[Y-Achsen Position][img:y_achse]
				%
				\item \textbf{Z-Achse Position} Abschliessend erfolgt noch eine Positionierung mit der Z-Achse des Beschleunigungssensors in Richtung des Gravitationsvektors (gleichgerichtet). Aus dieser Konstellation ergeben sich nur Beschleunigungen auf die X- und Y-Achsen des Sensors. Die Befestigungsrichtung des \gls{g:myrio}s ist in der Abbildung \vref{img:z_achse} zu sehen.
				\image{content/3_konzept/image/testaufbau_translation_position_z}{scale=0.8}{htbp}[Z-Achsen Position][img:z_achse]
			\end{itemize}\par 
			%
			Wie im vorherigen Abschnitt \vref{ss:material_translation} erörtert, kann die Translationgeschwindigkeit nicht messtechnisch bestimmt oder gemessen werden. Daher werden lediglich drei Bereiche definiert:
			\begin{itemize}
				\item \textbf{langsam} Die Translation ist nicht schneller als XXX\todo{Wert eintragen} in der Minute. Diese Vorgabe wird nur rudimentär mit einer Zeitmessung verifiziert.  
				\item \textbf{mittel} Der Kreuztisch wird schneller als die Stufe langsam bewegt, jedoch langsamer als die folgende Stufe schnell.
				\item \textbf{schnell} Maximale Geschwindigkeit, die mit dem Kreuztisch gefahren werden kann. Auf eine Kontrolle dieser Aussage wird verzichtet, da dies sehr bedienerabhänging ist.
			\end{itemize}\par
			%
			Insgesamt ergeben sich durch die verschiedenen Positionierungen und Geschwindigkeiten 9 verschiedene Messungen.\par 
			%
%			Für die Aufnahme der Messwerte kommen abhängig von der Messgruppe unterschiedliche Messmethodiken zum Einsatz:
%			\begin{itemize}
%				\item \textbf{Testgruppe}
%				\item \textbf{Kontrollgruppe}
%			\end{itemize}
			Bei der Durchführungen müssen folgende Vorgaben eingehalten werden:
			%
			\begin{itemize}
				\item Jede Messung ist 10 mal zu wiederholen (ergibt insgesamt 90 Messungen für dieses Protokoll)
				\item Die Bedienung des Kreuztisches muss durch unterschiedliche Personen erfolgen
				\item Die Translation beträgt immer \unit[200]{mm}
				\item Die Raumtemperatur sollte \unit[25]{°C} betragen
			\end{itemize}
		%
		\subsubsection*{Kontrollgruppe Messmethodik}
			Die Aufnahme der Pfadlänge erfolgt direkt mit der Messskala am Kreuztisch. Die Skala hat eine Auflösung von XXX\todo{ergäntzen}, was eine sehr präzises Messer ermöglicht. Die Abbildung XXX zeigt die verwendet Messskala des Tisches.
			\todo{Das Ablesen von der Skala -> Foto/Grafik}
		%
		\subsubsection*{Datenauswertung}\todo{abhängige Variabel}
	%
	%
	\subsection{Interpretation}\todo{Histogramm, Gruppenvergleich,Messfehler}
%
%
%Verifikation Rotation
\section{Verifikation Rotation}\label{s:verifikation_rotation}
	%
	%
	\subsection{Grund/Zweck der Messung}
		Das Auslenken des Knies beinhaltet neben einer Translation auch eine Rotation. Daher muss der Algorithmus auch in dieser Hinsicht verifiziert werden. Das Ziel dieser Messung ist es wiederum die Genauigkeit und Dynamik des Konzept zu überprüfen und mit den Anforderungen zu vergleichen. 
	%
	%
	\subsection{Material/Testumgebung}
		
%		\input{content/3_konzept/table/messmittel}	
%		\image{content/3_konzept/image/messaufbau}{scale=0.6}{htbp}[Messaufbau - Dimensionen][img:messaufbau_dimensionen]
%		\input{content/3_konzept/table/messaufbau}
	%
	%
	\subsection{Methoden}
		%
		\subsubsection*{Messgruppen}
			Für die Messung werden zwei Messgruppen festgelegt. Wiederum wird die eine als Testgruppe fungieren, wogegen die andere der Kontrolle dient.
			%
			\begin{itemize}
				%
				\item \textbf{Testgruppe} In der Testgruppe werden Beschleunigungsdaten durch das \gls{g:myrio} aufgezeichnet\footnote{siehe Abschnitt \vref{ss:rohdaten_aufzeichnen}} und gespeichert. Im Anschluss zur Messung werden die Daten in \gls{g:matlab} eingelesen und verarbeitet.
				%
				\item \textbf{Kontrollgruppe} Die zweite Gruppe repräsentiert die direkte Messung auf dem Rotationstisch. Sie dient gleichzeitig der Kontrolle für die folgende Interpretation.
			\end{itemize}
			%
			Die unabhängige Variabel dieser Gruppen stellt die Messmethodik dar. 
		%
		\subsubsection*{Testbeschreibungen}\todo{Ablauf}
		%
		\subsubsection*{Kontrollgruppe Messmethodik}
		%
		\subsubsection*{Datenauswertung}\todo{abhängige Variabel}
%			\formula{
%				r &= \sqrt{x^2+y^2}\\
%				&=\sqrt{47^2+515^2}=\underline{517.14}
%			}
%			{
%				r & Radius in mm\\
%				x & vertikaler Abstand in mm\\
%				y & horizontaler Abstand in mm\\
%			}[eq:radius]
%			%
%			\formula{
%				\alpha ' &= \frac{\alpha}{180}\cdot\pi\\[1ex]
%				&= \frac{21}{180}\cdot\pi = \underline{0.366}\\[2ex]
%				b&=r\cdot\alpha '\\
%				&=517.14\cdot 0.366=\underline{189.54}
%			}
%			{
%				r & Radius in mm\\
%				\alpha & Winkel in Grad\\
%				\alpha ' & Winkel in Rad\\
%				b & Teilumfang in mm\\
%			}[eq:kreissegement]
	%
	%
	\subsection{Kontrollgruppe}
	%
	%
	\subsection{Interpretation}\todo{Histogramm, Gruppenvergleich,Messfehler}
%
%
%Verifikation Translation und Rotation überlagert
\section{Verifikation Translation und Rotation überlagert}\label{s:verifikation_transaltion_rotation}
	%
	%
	\subsection{Grund/Zweck der Messung}
		Der Bewegungsablauf eines Knies umfasst eine Translation, die mit einer Rotation überlagert ist. Für eine abschliessende Überprüfung des Algorithmus sollen nun diese beiden Komponenten zeitgleich überprüft werden. Im Falle eines positiven Messergebnisse kann das Konzept, respektive der Algorithmus als geeignet betrachtet und implementiert werden.
	%
	%
	\subsection{Material/Testumgebung}
		Für eine aussagekräftige Messung muss eine Kniebewegung möglichst exakt nachgebildet werden können. Weiter sollten die Messungen reproduzierbar sein. Für diesen Zweck wurde eigens eine Mechanik konstruiert und aufgebaut.\par 
		%
		Der Simulator basiert auf Bosch-Profilen\footnote{Hergestellt von der Firma Bosch Rexroth AG: \url{http://www.boschrexroth.com}} und ist durch das sehr anpassbar. Der Aufbau erlaubt es einen vollständigen statischen Bewegungsablauf nachzubilden, jedoch ohne die horizontal Rotation zu berücksichtigen. Für eine konstante Geschwindigkeit des Ablaufs sorgt ein DC-Motor mit Rutschkupplung. Dieser wird mit einem DC-Netzteil gespiesen, was zugleich eine Steuerung der Geschwindigkeit ermöglicht (durch Variation der Spannung). Die Befestigung des \gls{g:myrio} erfolgt auf einer Platte, die wiederum auf dem Schwenkarm angebracht. Für das errechnen der Bewegungsbahn wird ausserdem ein Winkelmessgerät angebracht, das eine absolute Messung des Winkels erlaubt. Der komplette Aufbau ist in der Abbildung XXX ersichtlich, wohingegen die Tabelle \vref{tab:messmittel_tran_rot} alle verwendeten Messinstrumente enthält.
		%
		\input{content/3_konzept/table/messmittel_tran_rot}	
	%
	%
	\subsection{Methoden}
		%
		\subsubsection*{Messgruppen}\label{sss:messgruppe_tran_rot}
			Die Messung wird mit zwei Messgruppen durchgeführt, wobei die eine als Testgruppe und die andere als Kontrollgruppe dient.	
			%
			\begin{itemize}
				%
				\item \textbf{Testgruppe} Die Testgruppe beinhaltet das \gls{g:myrio} mit integriertem Beschleunigungssensor. Die Daten werden während des Tests aufgezeichnet und später auf dem Computer mit \gls{g:matlab} verarbeitet. 
				%
				\item \textbf{Kontrollgruppe} Die Kontrollgruppe dient als Basis für die spätere Auswertung. Die Aufnahme der Daten erfolgt zume einen Messtechnisch (Radius und Winkel) und zum anderen mathematisch (Berechnung der Pfadlänge).
			\end{itemize}
			%
			Das unterschiedliche Messverfahren stellt die unabhängige Variabel in diesem Protokoll dar.
		%
		\subsubsection*{Testbeschreibungen}\todo{Ablauf}
			Es werden Messungen bei unterschiedlichen Ausgangslagen durchgeführt. Sie unterscheiden sich in den Punkten Geschwindigkeit und Auslenkung. Dabei werden die Messungen auf insgesamt drei Auslenkungen und drei Geschwindigkeiten beschränkt.\par
			%
			Die Auslenkung $\alpha$ kann durch das Verstellen der Querstrebe (siehe Abbildung XXX) eingestellt werden. Die Position des \gls{g:myrio} wird dabei nicht verändert.
			%
			\begin{itemize}
				\item \textbf{Auslenkung 1} Die erste Auslenkung beträgt \unit[6]{°}. Dazu wird die Querstrebe an der Position 1 befestigt, wie in Abbildung \vref{img:messaufbau_pos1} ersichtlich.
				\image{content/3_konzept/image/messaufbau_querstrebe_pos_1}{scale=0.8}{htbp}[Querstreben-Position 1][img:messaufbau_pos1]
				%
				\item \textbf{Auslenkung 2} Für eine mittelgrosse Auslenkung wird die Querstrebe an Position 2 bei \unit[95]{mm} befestigt. Damit ist ein Winkelbereich von \unit[30]{°} möglich. Die Abbildung \vref{img:messaufbau_pos2} verdeutlicht die Befestigungsposition.
				\image{content/3_konzept/image/messaufbau_querstrebe_pos_2}{scale=0.8}{htbp}[Querstreben-Position 2][img:messaufbau_pos2]
				%
				\item \textbf{Auslenkung 3} Die maximale Auslenkung von \unit[75]{°} wird bei der dritten Position erreicht. Der Befestigungspunkt ist dabei bei \unit[190]{mm} wie die Abbildung \vref{img:messaufbau_pos3} zeigt.
				\image{content/3_konzept/image/messaufbau_querstrebe_pos_3}{scale=0.8}{htbp}[Querstreben-Position 3][img:messaufbau_pos3]
			\end{itemize}
			%
			Die Geschwindigkeit wird nur indirekt durch die Betriebsspannung des DC-Motors eingestellt. Dessen Spannungsbereich liegt zwischen \unit[8]{V} und \unit[12]{V}\footnote{Nach Aussage von Herr XXX}. Für die drei Geschwindigkeiten werden die Spannungen \unit[8]{V} für langsam, \unit[10]{V} für mittel und \unit[12]{V} für schnell festgelegt.
			%
			Durch die verschiedenen Auslenkungen und Geschwindigkeiten ergeben sich insgesamt 9 verschieden Messungen.\par 
			%
			Während den Messungen müssen zudem die folgenden Punkte eingehalten werden:
			%
			\begin{itemize}
				\item Jede Messung wird 10 mal wiederholt, was insgesamt 90 Messungen ergibt
				\item Die Messungen für die Kontrollgruppe muss durch unterschiedliche Personen ausgeführt werden
				\item Jede Messung enthält 5 Umdrehungen der Messeinrichtung (entspricht 5 Auslenkungen jeweils von rechts nach links \todo{kontrollieren})
				\item Die Raumtemperatur sollte \unit[25]{°C} betragen
			\end{itemize}
		%
		\subsubsection*{Kontrollgruppe Messmethodik}
			Die Datenaufnahme der Kontrollgruppe erfolgt, wie bereits \vpageref{sss:messgruppe_tran_rot} erläutert, mit Hilfe von Massstab M\low{4} und Winkelmesser M\low{1} mit anschliessender Berechnung der Pfadlänge. Dabei dient die Abbildung \vref{img:messaufbau_dimensionen} als Ausgangslage für die Aufnahme der skalaren Messgrössen. 
			\image{content/3_konzept/image/messaufbau}{scale=0.5}{htbp}[Messaufbau - Messmethodik][img:messaufbau_dimensionen]
			%
			Die benötigten Grössen sind zum einen der Radius $r$ (gemessen vom Drehpunkt bis Position Beschleunigungssensor) und davon abhängig die Bogenlänge $b$ (Entspricht der Pfadlänge des Bewegungsablaufs). Der Radius wird dem Satz des Pythagoras bestimmt, wie die Gleichung \vref{eq:radius} zeigt. 
			\formula{
				r &= \sqrt{x^2+y^2}\\
				&=\sqrt{47^2+515^2}=\underline{517.14}
			}
			{
				r & Radius in mm\\
				x & vertikaler Abstand in mm\\
				y & horizontaler Abstand in mm\\
			}[eq:radius]
			%
			Die Bogenlänge kann anschliessend mit der Gleichung \vref{eq:kreissegement} unter Berücksichtigung des Winkels $\alpha$ bestimmt werden.
			\formula{
					\alpha ' &= \frac{\alpha}{180}\cdot\pi\\[1ex]
					&= \frac{21}{180}\cdot\pi = \underline{0.366}\\[2ex]
					b&=r\cdot\alpha '\\
					&=517.14\cdot 0.366=\underline{189.54}
				}
				{
					r & Radius in mm\\
					\alpha & Winkel in Grad\\
					\alpha ' & Winkel in Rad\\
					b & Teilumfang in mm\\
				}[eq:kreissegement]
		%
		\subsubsection*{Datenauswertung}\todo{abhängige Variabel}
	%
	%
	\subsection{Interpretation}\todo{Histogramm, Gruppenvergleich,Messfehler}
%
%
%Validierung
\section{Validierung}
\todo{Auswertung Konzept}
